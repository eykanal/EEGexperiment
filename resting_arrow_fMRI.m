% function resting (windowptr,togo, money, opponent_money)function resting (togo, money, cue_type, waitdur)% 7/17/07: Modified for DotsX.% 11/29/08: Cuts out most instructions and disables keyboard responses for% the MRI scanner.% function resting (togo, money)%% Displays resting screen% Inputs:%  togo - number of blocks to go%  money - money earned[wn_, sr_, ppd_, fr_] = rGraphicsGetScreenAttributes;xres = sr_(3);yres = sr_(4);fontsize = 22;fontsize = 30;lnsp = -1;fontsize = 30;spacekey = 44; % Only accept a space as the command to quit:str = {};x_pos = {};% str{1} = 'Please rest now.';if strcmp(cue_type,'a')==1    str{1} = 'In the next block of trials, wait til the ARROW appears.';    str{2} = 'Press Left if the ARROW points left, and Right if it points right.';else    str{1} = 'In the next block of trials, pay attention to DOT MOTION.';    str{2} = 'Press Left if the DOTS move left, and Right if they move right.';end% str{4} = 'Whenever you are ready to';% str{5} = 'continue, press SPACE.';num_strings = 2;% y_pos = { -4*lnsp -3*lnsp -2*lnsp -1*lnsp 0*lnsp };y_pos = { -1*lnsp 0*lnsp };if nargin >= 2    str{3} = sprintf ('Number of blocks remaining: %d', togo);    num_strings = 3;    y_pos = { y_pos{:}, 1*lnsp };endif nargin >= 2    str{4} = sprintf('Total earned: $%.2f', money/100);    num_strings = 4;    y_pos = { y_pos{:}, 2*lnsp };endfor i = 1:num_strings    textwidth = fontsize*length(str{i})/ppd_;    %         x_pos{i} = -textwidth/pi;    x_pos{i} = -0.3*textwidth;end% shoe a normal text, and%   try to make another that looks good on mono++indices = rAdd('dXtext', num_strings, 'visible', true, ...    'x', x_pos, 'y', y_pos, ...    'size', fontsize, ...    'font', 'Courier',  ...    'bold', true, ...    'color', [1 1 1]*255, ...    'string', str );%     rGraphicsDraw(inf)spacekey = 44; % Only accept a space as the command to quit:rGraphicsDraw;WaitSecs(waitdur);% [ keySecs, myKeyCode ] = rGraphicsDrawSelectiveBreakMulti(inf,[],spacekey);% while KbCheckMulti%     WaitSecs(0.002);% end% %     KbWait;rRemove('dXtext',indices);% rSet('dXtext',indices,'visible',false);rGraphicsDraw;